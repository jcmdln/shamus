# Snagem API v1 Specification
# http://spec.openapis.org/oas/v3.0.3
#
# Please note that this is a work-in-progress which is likely to change
# drastically as well as without warning. This notice will be removed once this
# is no longer the case.

#
# Components
#

components:
  schemas:
    Media:
      type: object
      required:
        - mediaType
      properties:
        mediaType:
          type: string

    Audio:
      allOf:
        - $ref: "#components/schemas/Media"
        - type: object
          properties:
            duration:
              type: integer
            format:
              type: string
            language:
              type: string
            lyrics:
              type: string
            name:
              type: string
            size:
              type: string
            source:
              type: string
            tags:
              type: array

    Video:
      allOf:
        - $ref: "#components/schemas/Media"
        - type: object
          properties:
            duration:
              type: integer
            format:
              type: string
            language:
              type: string
            name:
              type: string
            size:
              type: string
            source:
              type: string
            subtitles:
              type: array
            tags:
              type: array

    Role:
      type: object
      required:
        - roleType
      properties:
        roleType:
          type: string

    Admin:
      allOf:
        - $ref: "#components/schemas/Role"

    Moderator:
      allOf:
        - $ref: "#components/schemas/Role"

    User:
      allOf:
        - $ref: "#components/schemas/Role"

#
# Endpoints
#

endpoints:
  /:
    get:
      description: Returns all media the user has access to
      responses:
        "200":
          description: A list of media
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Media"

  /{media_id}:
    get:
      description: Returns information about {media_id} the user has access to
      responses:
        "200":
          description: An object of media properties
          content:
            application/json:
              schema:
                type: object
                  $ref: "#/components/schemas/Media"

  /{user_id}:
    get:
      description: Returns all media of {user_id} the user has access to
      responses:
        "200":
          description: A list of media
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/User"

  /{playlist_id}:
    get:
      description: >-
        Returns all media from the {playlist_id} the user has access to
      responses:
        "200":
          description: "A list of media"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Playlist"

  # Would like to offer a few different auth methods:
  #   - Traditional user/password
  #   - GitHub Oauth2
  #   - GitLab Oauth2?
  #   - Google Oauth2
  #   - Something else?
  /auth:

  /settings:
    get:
      description: Returns all settings the current user has access to
      responses:
        "200":
          description: "An object of current settings"
          content:
            application/json:
              schema:
                type: object
