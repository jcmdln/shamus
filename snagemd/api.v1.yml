# Snagem API v1 Specification
# http://spec.openapis.org/oas/v3.0.3
#
# Please note that this is a work-in-progress which is likely to change
# drastically as well as without warning. This notice will be removed once this
# is no longer the case.

components:
  schemas:
    Media:
      type: object
      required:
        - mediaType
      properties:
        mediaType:
          type: string

    Audio:
      allOf:
        - $ref: "#components/schemas/Media"
        - type: object
          properties:
            duration:
              type: integer
            format:
              type: string
            language:
              type: string
            lyrics:
              type: string
            name:
              type: string
            size:
              type: string
            source:
              type: string
            tags:
              type: array

    Video:
      allOf:
        - $ref: "#components/schemas/Media"
        - type: object
          properties:
            duration:
              type: integer
            format:
              type: string
            language:
              type: string
            name:
              type: string
            size:
              type: string
            source:
              type: string
            subtitles:
              type: array
            tags:
              type: array

routes:
  /:
    get:
      description: >-
        Returns all routes the user has access to
      responses:
        "200":
          description: "An object of routes"
          content:
            application/json:
              schema:
                type: object

  /library:
    get:
      description: >-
        Returns all media from the library the user has access to
      responses:
        "200":
          description: "A list of media"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Media"

  /library/{user_id}:
    get:
      description: >-
        Returns all media from the library of {user_id} the user has access to
      responses:
        "200":
          description: "A list of media"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Media"

  /library/{user_id}/{playlist_id}:
    get:
      description: >-
        Returns all media from the {playlist_id} by {user_id} the user has access to
      responses:
        "200":
          description: "A list of media"
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Media"
